import unittest

from yweather import YWeather

class TestYWeather(unittest.TestCase):

    def test_weather_json_parsing(self):
        weather = YWeather()
        weather.parseWeather("{\"query\":{\"count\":1,\"created\":\"2018-09-21T18:57:17Z\",\"lang\":\"de-DE\",\"results\":{\"channel\":{\"units\":{\"distance\":\"km\",\"pressure\":\"mb\",\"speed\":\"km/h\",\"temperature\":\"C\"},\"title\":\"Yahoo! Weather - Luebeck, SH, DE\",\"link\":\"http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/*https://weather.yahoo.com/country/state/city-672826/\",\"description\":\"Yahoo! Weather for Luebeck, SH, DE\",\"language\":\"en-us\",\"lastBuildDate\":\"Fri, 21 Sep 2018 08:57 PM CEST\",\"ttl\":\"60\",\"location\":{\"city\":\"Luebeck\",\"country\":\"Germany\",\"region\":\" SH\"},\"wind\":{\"chill\":\"54\",\"direction\":\"240\",\"speed\":\"28.97\"},\"atmosphere\":{\"humidity\":\"58\",\"pressure\":\"33965.49\",\"rising\":\"0\",\"visibility\":\"25.91\"},\"astronomy\":{\"sunrise\":\"7:2 am\",\"sunset\":\"7:17 pm\"},\"image\":{\"title\":\"Yahoo! Weather\",\"width\":\"142\",\"height\":\"18\",\"link\":\"http://weather.yahoo.com\",\"url\":\"http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif\"},\"item\":{\"title\":\"Conditions for Luebeck, SH, DE at 08:00 PM CEST\",\"lat\":\"53.866268\",\"long\":\"10.68088\",\"link\":\"http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/*https://weather.yahoo.com/country/state/city-672826/\",\"pubDate\":\"Fri, 21 Sep 2018 08:00 PM CEST\",\"condition\":{\"code\":\"29\",\"date\":\"Fri, 21 Sep 2018 08:00 PM CEST\",\"temp\":\"13\",\"text\":\"Partly Cloudy\"},\"forecast\":[{\"code\":\"12\",\"date\":\"21 Sep 2018\",\"day\":\"Fri\",\"high\":\"25\",\"low\":\"11\",\"text\":\"Rain\"},{\"code\":\"39\",\"date\":\"22 Sep 2018\",\"day\":\"Sat\",\"high\":\"15\",\"low\":\"9\",\"text\":\"Scattered Showers\"},{\"code\":\"39\",\"date\":\"23 Sep 2018\",\"day\":\"Sun\",\"high\":\"14\",\"low\":\"8\",\"text\":\"Scattered Showers\"},{\"code\":\"39\",\"date\":\"24 Sep 2018\",\"day\":\"Mon\",\"high\":\"13\",\"low\":\"7\",\"text\":\"Scattered Showers\"},{\"code\":\"30\",\"date\":\"25 Sep 2018\",\"day\":\"Tue\",\"high\":\"14\",\"low\":\"5\",\"text\":\"Partly Cloudy\"},{\"code\":\"28\",\"date\":\"26 Sep 2018\",\"day\":\"Wed\",\"high\":\"16\",\"low\":\"8\",\"text\":\"Mostly Cloudy\"},{\"code\":\"30\",\"date\":\"27 Sep 2018\",\"day\":\"Thu\",\"high\":\"16\",\"low\":\"8\",\"text\":\"Partly Cloudy\"},{\"code\":\"30\",\"date\":\"28 Sep 2018\",\"day\":\"Fri\",\"high\":\"14\",\"low\":\"8\",\"text\":\"Partly Cloudy\"},{\"code\":\"30\",\"date\":\"29 Sep 2018\",\"day\":\"Sat\",\"high\":\"16\",\"low\":\"6\",\"text\":\"Partly Cloudy\"},{\"code\":\"30\",\"date\":\"30 Sep 2018\",\"day\":\"Sun\",\"high\":\"14\",\"low\":\"5\",\"text\":\"Partly Cloudy\"}],\"description\":\"<![CDATA[<img src=\\\"http://l.yimg.com/a/i/us/we/52/29.gif\\\"/>\\n<BR />\\n<b>Current Conditions:</b>\\n<BR />Partly Cloudy\\n<BR />\\n<BR />\\n<b>Forecast:</b>\\n<BR /> Fri - Rain. High: 25Low: 11\\n<BR /> Sat - Scattered Showers. High: 15Low: 9\\n<BR /> Sun - Scattered Showers. High: 14Low: 8\\n<BR /> Mon - Scattered Showers. High: 13Low: 7\\n<BR /> Tue - Partly Cloudy. High: 14Low: 5\\n<BR />\\n<BR />\\n<a href=\\\"http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/*https://weather.yahoo.com/country/state/city-672826/\\\">Full Forecast at Yahoo! Weather</a>\\n<BR />\\n<BR />\\n<BR />\\n]]>\",\"guid\":{\"isPermaLink\":\"false\"}}}}}}")
        self.assertEqual(weather.temp, '13')
        self.assertEqual(weather.high, '25')
        self.assertEqual(weather.low, '11')
        self.assertEqual(weather.weatherText, 'Partly Cloudy')
        self.assertEqual(weather.picUrl, 'https://s.yimg.com/os/weather/1.0.1/shadow_icon/60x60/partly_cloudy_day@2x.png')
        
if __name__ == '__main__':
    unittest.main()
    
